<!DOCTYPE html>
<html lang="en" class="commonBg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>我的</title>
    <link rel="stylesheet" href="../../../css/api.css" />
    <link rel="stylesheet" href="../../../css/commonWin.css" />
    <link rel="stylesheet" href="../../../css/mineCommon.css" />
    <link rel="stylesheet" href="../../../css/mui.min.css">

    <link rel="stylesheet" href="../../../css/mui.picker.all.css" />
    <link rel="stylesheet" href="../../../css/mui.dtpicker.css" />
    <style>

        .resume_editResume_main {
            padding: 0.28rem 0.28rem 0;
        }

        .resume_editResume_item .title {
            font-size: 0.28rem;
            color: #333333;
        }

        .resume_editResume_item .link {
            color: #333333;
        }

        .info-choose-name {
            color: #333333;
        }

        .info-choose-main-name {
            color: #999999;
        }

        .describe {
            border-bottom: 1px solid #EBEBEB;
            padding: 0.3rem 0;
        }

        .describe .info-choose {
            border: 0;
            height: auto;
        }

        .describe p {
            color: #999999;
            margin: 0;
        }

        span.name {
            font-size: 0.28rem;
            color: #999999;
        }

        div.top {
            padding-top: 0.4rem;
        }

        div.minHeight {
            height: auto;
            padding-bottom: 0.4rem;
        }

        div.maxHeight {
            height: 1.05rem;
        }

        .info-choose-name.link {
            color: #999999;
        }
    </style>
    <!--<script src="https://cdn.bootcss.com/eruda/1.2.6/eruda.js"></script>
<script>eruda.init();</script>-->
</head>
<body class="commonBg">

<div class="Box">
    <!--&lt;!&ndash;头部&ndash;&gt;-->
    <!--<div class="header"></div>-->
    <!--主体-->

    <div class="resume_editResume_main">
        <div class="resume_editResume_item top" onclick="resume_Project()">
            <div class="title">项目名称</div>
            <div class="info-choose minHeight cssFlex">
                <span class="info-choose-name name" id="pro_name">请输入</span>
                <div class="info-choose-main cssFlex">
                    <img src="../../../icon/right.png" alt="right" class="info-img-right">
                </div>
            </div>
        </div>

        <div class="resume_editResume_item">
            <div class="info-choose maxHeight cssFlex" onclick="resume_CompanyLi()">
                <span class="info-choose-name">是否关联工作经历</span>
                <div class="info-choose-main cssFlex">
                    <span class="info-choose-main-name birth_option" id="c_name">不关联任何公司</span>
                    <span id="c_id" style="display: none"></span>
                    <img src="../../../icon/right.png" alt="right" class="info-img-right">
                </div>
            </div>
        </div>

        <div class="resume_editResume_item describe" onclick="resume_ProjectDescription()">
            <div class="info-choose cssFlex">
                <span class="info-choose-name">项目描述</span>
                <div class="info-choose-main cssFlex">
                    <img src="../../../icon/right.png" alt="right" class="info-img-right">
                </div>
            </div>

            <p id="pro_note">请输入</p>
        </div>

        <div class="resume_editResume_item">
            <div class="info-choose maxHeight cssFlex" onclick="resume_Achievement()">
                <span class="info-choose-name">你的成就</span>
                <div class="info-choose-main cssFlex">
                    <span class="info-choose-main-name birth_option" id="pro_cheng">请输入</span>
                    <img src="../../../icon/right.png" alt="right" class="info-img-right">
                </div>
            </div>
        </div>

        <div class="resume_editResume_item" onclick="entry_date()">
            <div class="info-choose maxHeight cssFlex">
                <span class="info-choose-name">项目起始时间</span>
                <div class="info-choose-main cssFlex">
                    <span class="info-choose-main-name entry_date" id="pro_begin"></span>
                    <img src="../../../icon/right.png" alt="right" class="info-img-right">
                </div>
            </div>
        </div>

        <div class="resume_editResume_item">
            <div class="info-choose maxHeight cssFlex" onclick="end_date()">
                <span class="info-choose-name">项目结束时间</span>
                <div class="info-choose-main cssFlex">
                    <span class="info-choose-main-name end_date" id="pro_up"></span>
                    <img src="../../../icon/right.png" alt="right" class="info-img-right">
                </div>
            </div>
        </div>

        <div class="resume_editResume_item">
            <div class="info-choose maxHeight cssFlex" onclick="resume_ProjectLinks()">
                <span class="info-choose-name">项目链接</span>
                <div class="info-choose-main cssFlex">
                    <span class="info-choose-main-name" id="pro_link">请输入</span>
                    <img src="../../../icon/right.png" alt="right" class="info-img-right">
                </div>
            </div>
        </div>

        <div id="proid" style="display:none;"></div>

    </div>



</div>

<script type="text/javascript" src="../../../script/api.js"></script>
<script type="text/javascript" src="../../../script/rem.js"></script>
<script type="text/javascript" src="../../../script/util.js"></script>
<script type="text/javascript" src="../../../script/rem.js"></script>
<script type="text/javascript" src="../../../script/apiCloud.js"></script>
<script type="text/javascript" src="../../../script/public.js"></script>
<script type="text/javascript" src="../../../script/mui.min.js"></script>
<script type="text/javascript" src="../../../script/mui.picker.js"></script>
<script type="text/javascript" src="../../../script/mui.dtpicker.js"></script>
<script type="text/javascript" src="../../../script/data.js"></script>
<script>
    apiready = function () {

    };

    // 编辑您的项目名称
    function resume_Project() {
        openNewWindow("resume_Project", "./resume_Project.html", {
            url: 'resume_addProject',
            type: "1"
        })
    }
    function pro_name(value) {
        document.getElementById("pro_name").innerText = value;
    }

    // 编辑是否关联工作经历
    function resume_CompanyLi() {
        openNewWindow("resume_CompanyLi", "./resume_CompanyLi.html", {
            url: 'resume_addProject',
            content: document.getElementById("c_id").innerText
        })
    }
    function c_id(value,c_id) {
        document.getElementById("c_name").innerText = value;
        document.getElementById("c_id").innerText = c_id;
    }
    // 编辑您的成就
    function resume_Achievement() {
        openNewWindow("resume_Achievement", "./resume_Achievement.html", {
            url: 'resume_addProject',
            type: "1"
        })
    }
    function pro_cheng(value) {
        document.getElementById("pro_cheng").innerText = value;
    }
    // 编辑您的项目描述
    function resume_ProjectDescription() {
        openNewWindow("resume_ProjectDescription", "./resume_ProjectDescription.html", {
            url: 'resume_addProject',
            type: "1"
        })
    }
    function pro_note(value) {
        document.getElementById("pro_note").innerText = value;
    }
    // 编辑您的项目地址
    function resume_ProjectLinks() {
        openNewWindow("resume_ProjectLinks", "./resume_ProjectLinks.html", {
            url: 'resume_addProject',
            type: "1"
        })
    }
    function pro_link(value) {
        document.getElementById("pro_link").innerText = value;
    }



    // 入学开始
    function entry_date() {
        var dtpicker = new mui.DtPicker(
            {
                type: "date", //设置日历初始视图模式
                // value:new Date(),
                beginDate: new Date(1950, 04, 25), //设置开始日期
                endDate: new Date() //设置开始日期
            }
        );
        dtpicker.show(function (selectItems) {
            // console.log(selectItems)
            // $(".birth_option").val(selectItems.text)
            document.querySelector('.entry_date').innerText = selectItems.text;
        })

    }

// 入学开始
    function end_date() {
        var dtpicker = new mui.DtPicker(
            {
                type: "date", //设置日历初始视图模式
                // "value":"1950-03-03",
                beginDate: new Date(1950, 04, 25), //设置开始日期
                endDate: new Date() //设置开始日期
            }
        );
        dtpicker.show(function (selectItems) {
            // console.log(selectItems)
            document.querySelector('.end_date').innerText = selectItems.text;
        })

    }


    function preservation() {
        var project_name = document.getElementById("pro_name").innerText;
        var p_note = document.getElementById("pro_note").innerText;
        var summary = document.getElementById("pro_cheng").innerText;
        var p_from = document.getElementById("pro_begin").innerText ;
        var p_to = document.getElementById("pro_up").innerText;
        var p_url = document.getElementById("pro_link").innerText;
        var c_id = document.getElementById("c_id").innerText;
        var pro_id = document.getElementById("proid").innerText;

        if (project_name == "请输入"){
            api.toast({
                msg: '请填写项目名称'
            });
            return
        }else if(p_note == "请输入"){
            api.toast({
                msg: '请填写项目描述'
            });
            return
        }else if(p_from == ""){
            api.toast({
                msg: '请填写项目起始时间'
            });
            return
        }else if(p_to == ""){
            api.toast({
                msg: '请填写项目结束时间'
            });
            return
        }


        var person_id = localStorage.getItem('person_id');
        var params = {
            project_name: project_name,
            p_note: p_note,
            summary: summary,
            p_from: p_from,
            p_to: p_to,
            p_url: p_url,
            c_id: c_id,
            p_id: person_id,
            pro_id:''
        }
        // console.log(params)

        ajaxGetWithProgress(createProjectExperience, params, function (data, err) {
            // alert(JSON.stringify(data));
            // console.log(data)
            if (data.return_info.status) {
                // api.toast({
                //     msg: '添加项目经历成功'
                // });
                api.execScript({
                    name: 'resume_editResume',
                    frameName: "resume_editResume_body",
                    script: 'reload()'
                })
                closeWin();
            }else{
                api.toast({
                    msg: '请求失败'
                });
            }

        });
    }
</script>
</body>
</html>
