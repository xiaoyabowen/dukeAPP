<!DOCTYPE html>
<html lang="en" class="commonBg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>我的</title>
    <link rel="stylesheet" href="../../../css/api.css" />
    <link rel="stylesheet" href="../../../css/commonWindow.css" />
    <link rel="stylesheet" href="../../../css/mineCommon.css" />
    <!--<script src="https://cdn.bootcss.com/eruda/1.2.6/eruda.js"></script>
    <script>eruda.init();</script>-->
</head>
<body class="commonBg">

<div class="Box">
    <div class="boxSub">
        <div id="workings"></div>
    </div>

</div>

<script type="text/javascript" src="../../../script/api.js"></script>
<script type="text/javascript" src="../../../script/rem.js"></script>
<script type="text/javascript" src="../../../script/util.js"></script>
<script type="text/javascript" src="../../../script/kv.js"></script>
<script type="text/javascript" src="../../../script/apiCloud.js"></script>
<script type="text/javascript" src="../../../script/public.js"></script>
<script type="text/javascript" src="../../../script/data.js"></script>
<script>

    apiready = function () {
        url = api.pageParam.url;
        ajaxGetWithProgress(GetResumeInformation, {}, function (data, err) {
            // alert(JSON.stringify(data));
            console.log(data);
            if (data) {
                var working_his = data.working_his;

                // 工作经历
                if (working_his.length > 0) {
                    var workings = document.getElementById('workings');
                    var arr = [];
                    for (var i = 0; i < working_his.length; i++) {
                        var str = '<div class="info-choose cssFlex" data-id="'+ working_his[i].w_id + '" data-name="'+ working_his[i].com_name +'">\n' +
                            '                        <span class="info-choose-name">' + working_his[i].com_name + '</span>\n' +
                            '                        <div class="info-choose-main cssFlex">\n' +
                            '                            <img src="../../../icon/right.png" alt="right" class="info-img-right">\n' +
                            '                        </div>\n' +
                            '                    </div>';
                        arr.push(str);
                    }

                    var dom = arr.join('');
                    workings.innerHTML = dom;
                }


            }
            var addEditWork = document.querySelector('.info-choose');
            addEditWork.addEventListener("click",function () {
                var c_id = this.attributes["data-id"].nodeValue
                var c_name = this.attributes["data-name"].nodeValue
                var frameName = url + "_body";
                api.execScript({
                    name:url,
                    // frameName:url +"_body",
                    frameName: frameName,
                    script: 'c_id('+JSON.stringify(c_name)+','+JSON.stringify(c_id)+')'
                })
                closeWin();
            })
            // if (data.return_info.status) {
            //     api.toast({
            //         msg: '编辑教育经历成功'
            //     });
            // }

        });
    };











    // 点击保存执行此方法
    function preservation () {
        var value = text.value;
        // alert(value);
        if(isBlack(value)){
            toast("请输入公司名称");
            return;
        }

        var frameName = url + "_body";
        api.execScript({
            name:url,
            // frameName:url +"_body",
            frameName: frameName,
            script: 'com_name('+JSON.stringify(value)+')'
        })
        closeWin();
    }

    // 此处手动调用了js
    // apiready()

</script>
</body>
</html>
