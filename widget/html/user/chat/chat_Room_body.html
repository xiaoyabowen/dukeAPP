<!DOCTYPE html>
<html lang="en" class="commonBg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>聊天</title>
    <link rel="stylesheet" href="../../../css/api.css" />
    <link rel="stylesheet" href="../../../css/commonWin.css" />
    <link rel="stylesheet" href="../../../css/mui.min.css">
    <link rel="stylesheet" href="../../../css/chatCommon.css">
</head>
<body class="commonBg">

    <div class="Box">
        <div id="message">
            <div class="reply">
                <div class="time">05/22 06:30</div>
                <div class="msg">
                    <img src="../../../image/chat/touxiang.png" alt=""/>
                    <span class="name">斜杠青年</span>
                    <p>
                        <i class="msg_input"></i>
                        你好在不在呀，妹子！
                    </p>
                </div>
            </div>
            <div class="ask">
                <div class="time">05/22 06:30</div>
                <div class="msg">
                    <img src="../../../image/chat/touxiangm.png" alt=""/>
                    <p>
                        <i clas="msg_input"></i>
                        你好你好你好
                    </p>
                </div>
            </div>
        </div>
        <div id="footer" class="cssFlex">
            <img src="../../../image/chat/hua.png" alt=""/>
            <img src="../../../image/chat/xiaolian.png" alt=""/>
            <input class="my-input" type="text"/>
            <p class="send">发送</p>
        </div>
    </div>
    <script type="text/javascript" src="../../../script/api.js"></script>
    <script type="text/javascript" src="../../../script/util.js"></script>
    <script type="text/javascript" src="../../../script/jquery-1.8.1.min.js"></script>
    <script type="text/javascript" src="../../../script/apiCloud.js"></script>
    <script type="text/javascript" src="../../../script/public.js"></script>
    <script type="text/javascript" src="../../../script/rem.js"></script>
    <script type="text/javascript" src="../../../script/mui.min.js"></script>
    <script type="text/javascript" src="../../../script/data.js"></script>
    <script type="text/javascript" src="../../../script/chat.js"></script>

    <script src="../../../script/paho-mqtt.min.js"></script>
    <script src="../../../script/vue.min.js"></script>
    <script src="../../../script/vuex.min.js"></script>

    <script src="https://cdn.bootcss.com/eruda/1.2.6/eruda.js"></script>
    <script>eruda.init();</script>
    <script>
        // //所有主题
        // var allTopics = [
        //     { "Topic": "/data/alarm", "Describe": "报警" },
        //     { "Topic": "/data/message", "Describe": "消息" },
        //     { "Topic": "/data/notify", "Describe": "通知" }
        // ];
        //
        // //选中订阅主题
        // var selectedTopics = [];
        //
        // //选中发布主题
        // var currentTopic;
        //
        // //客户端选项
        // var option = {
        //     "ServerUri": "192.168.1.10",
        //     "ServerPort": 61614,
        //     "UserName": "admin",
        //     "Password": "password",
        //     "ClientId": "",
        //     "TimeOut": 5,
        //     "KeepAlive": 100,
        //     "CleanSession": false,
        //     "SSL":false
        // }
        //
        // //客户端
        // var client;
        //
        // //设置客户端标识
        // option.ClientId = guid();
        //
        // console.log(Paho)
        // client = new Paho.Client(option.ServerUri, option.ServerPort, option.ClientId);
        // client.onConnectionLost = onConnectionLost; //绑定连接断开事件
        // client.onMessageArrived = onMessageArrived; //绑定接收消息事件
        // //连接服务端
        // client.connect({
        //     invocationContext: {
        //         host: option.ServerUri,//IP地址
        //         port: option.ServerPort,//端口号
        //         path: client.path,
        //         clientId: option.ClientId//标识
        //     },
        //     timeout: option.TimeOut,//连接超时时间
        //     keepAliveInterval: option.KeepAlive,//心跳间隔
        //     cleanSession: option.CleanSession,//是否清理Session
        //     useSSL: option.SSL,//是否启用SSL
        //     userName: option.UserName,  //用户名
        //     password: option.Password,  //密码
        //     onSuccess: onConnect,//连接成功回调事件
        //     onFailure: onError//连接失败回调事件
        // });
        //
        // //连接成功回调事件
        // function onConnect() {
        //     // Once a connection has been made, make a subscription and send a message.
        //     console.log("连接成功了");
        //     client.subscribe("yang");
        //     var message = new Paho.Message("Hello");
        //     message.destinationName = "/World";
        //     client.send(message);
        // };
        // //连接失败回调事件
        // function onError(e) {
        //     console.log("连接失败：" + e)
        // }
        // //连接断开事件
        // function onConnectionLost(responseObject) {
        //     if (responseObject.errorCode !== 0)
        //         console.log("onConnectionLost:"+responseObject.errorMessage);
        // };
        // //接收消息事件
        // function onMessageArrived(message) {
        //     console.log(message)
        //     console.log("onMessageArrived:"+message.payloadString);
        //     console.log("topic:"+message.topic);
        //     // client.disconnect();
        // };
        //
        // //生成GUID
        // function guid() {
        //     function S4() {
        //         return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
        //     }
        //     return (S4() + S4() + "-" + S4() + "-" + S4() + "-" + S4() + "-" + S4() + S4() + S4());
        // }
    </script>

    <script>

        apiready = function () {

            new Vue({
                el: '#chat',
                data: {
                    isDisplay: false,
                    active: 'contacts',
                    list: [],
                    person_id: ''
                },
                created: function () {
                    this.person_id = localStorage.getItem('person_id');


                },
                mounted: function () {

                    this.isDisplay = true;
                },
                methods: {

                }
            })
        }

        // apiready();
    </script>
</body>
</html>
